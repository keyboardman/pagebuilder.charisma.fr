{% extends 'base.html.twig' %}

{% block title %}Modifier {{ page.title }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% if page.theme.generatedCssPath %}
        <link rel="stylesheet" href="{{ path('app_theme_css', { id: page.theme.id }) }}">
    {% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('pageForm') }}
{% endblock %}

{% block body %}
<div class="max-w-4xl space-y-6">
    <div class="flex items-center justify-between gap-4 flex-wrap">
        <div>
            <a href="{{ path('app_page_index') }}" class="btn btn-ghost btn-sm mb-2">← Retour</a>
            <h1 class="text-2xl font-bold tracking-tight">Modifier la page</h1>
        </div>
        <a href="{{ path('app_page_builder', { id: page.id }) }}" class="btn btn-outline btn-sm">Builder</a>
        <a href="{{ path('app_page_preview', { id: page.id }) }}" class="btn btn-outline btn-sm" target="_blank" rel="noopener">Prévisualiser</a>
    </div>

    <div
      id="page-form-root"
      data-post-url="{{ post_url }}"
      data-themes="{{ themes_for_js|json_encode|e('html_attr') }}"
      data-page="{{ { id: page.id, title: page.title, slug: page.slug, theme_id: page.theme.id, description: page.description ?? '' }|json_encode|e('html_attr') }}"
      data-csrf-token="{{ csrf_token('page_form') }}"
    ></div>
</div>
{% endblock %}
